{% extends "base.html" %}
{% block title %}Results for {{ query }}{% endblock %}
{% block content %}
<div class="max-w-3xl mx-auto mt-10 p-6 bg-white rounded-lg shadow-lg">
  <h1 class="text-2xl font-bold mb-4 text-gray-900">Scrape Results for "{{ query }}"</h1>
  {% if error %}
    <div class="text-red-600 font-semibold mb-4">Error: {{ error }}</div>
  {% endif %}
  {% if not results %}
    <p class="text-gray-700">No results found.</p>
  {% else %}
    {% for res in results %}
      <div class="mb-12">
        <div class="p-4 bg-gray-50 rounded-lg border mb-4">
          <h2 class="text-xl font-semibold text-blue-700 hover:underline mb-2">
            <a href="{{ res.url }}" target="_blank" rel="noopener noreferrer">{{ res.title }}</a>
          </h2>
          <p class="text-sm text-gray-500 mb-2">{{ res.url }}</p>
          <p><span class="font-semibold">Meta Description:</span> <span class="text-gray-800">{{ res.structured_content.meta_description }}</span></p>
          <p><span class="font-semibold">Main Heading:</span> <span class="text-gray-800">{{ res.structured_content.main_heading }}</span></p>
          <p><span class="font-semibold">Author:</span> <span class="text-gray-800">{{ res.structured_content.author }}</span></p>
          <p><span class="font-semibold">Published Date:</span> <span class="text-gray-800">{{ res.structured_content.published_date }}</span></p>
          <p><span class="font-semibold">Keywords:</span>
            <span class="text-gray-800">
              {% if res.structured_content.keywords is string %}
                {{ res.structured_content.keywords }}
              {% else %}
                {{ res.structured_content.keywords | join(', ') }}
              {% endif %}
            </span>
          </p>
        </div>
        <div class="p-4 bg-white rounded-lg border overflow-auto whitespace-pre-wrap max-h-96 break-words">
          {{ res.raw_content_excerpt }}
        </div>
      </div>
    {% endfor %}
  {% endif %}
  <a href="/" class="text-blue-600 hover:underline">ðŸ”„ New Search</a>
  </div>
</div>
{% endblock %}
